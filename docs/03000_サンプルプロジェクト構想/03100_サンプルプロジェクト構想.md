# サンプルプロジェクト構想

<br>

# 文書情報
---
* **文書名**: サンプルプロジェクト構想
* **作成日**: 2025年9月6日
* **更新日**: 2025年9月6日
* **バージョン**: 1.0
* **作成者**: システム開発チーム

<br>

# 1. 目的
DatabricksとVS Codeを連携し活用するサンプルプロジェクトを通じて必要な機能を検証し、実務への適用可能性を評価する。

# 2. VS Code × Databricks が活きるケース

## 2.1 ドキュメント作成・レビュー
- ドキュメントレビュー: テンプレ準拠・必須章・用語統一を点検し、規程/良質例を引用。
- 変更差分サマリ: PR前の差分を要約し、影響点とレビューポイントを提示（根拠リンク付き）。
- ドラフト生成: SQL結果や統計値を引用してREADME/設計書の叩き台を生成。
- オンボーディング支援: スターター/規程一覧/用語集の提示。
- ベストプラクティスFAQ: 接続手順・命名規約・審査観点の即時回答。
- 主に使うDatabricks: Vector Search（規程/Wiki/サンプル）、SQL Warehouse（統計/集計）。

## 2.2 コード/SQL品質・再利用
- コード規約レビュー: 命名・例外・ログ・セキュリティ・SQL規約の逸脱指摘。
- SQLガバナンス確認: 句順/禁止句/コスト注意、標準クエリの再利用促進。
- 保存済みクエリ/ダッシュボード再利用: 既存資産を検索・引用して二重実装を回避。
- 実装例・スニペット提示: 近い要件の良質例を提示。
- 主に使うDatabricks: SQL Warehouse、Queries API、Vector Search。

## 2.3 データガバナンス/コンプライアンス
- データ参照チェック: テーブル/列からPII/機密度を照会し、対処提案（マスキング等）。
- 変更影響分析: リネージを基に下流ノートブック/BI/ジョブの影響候補を列挙。
- 権限・アクセス査定ドラフト: Unity Catalog情報に基づく最小権限・必要ロールの提示。
- データ品質レポート要約: DQ逸脱の要約と改善候補（出典付き）。
- 主に使うDatabricks: Unity Catalog（分類/リネージ）、SQL Warehouse、Vector Search。

## 2.4 運用/信頼性
- Runbook支援・初動: 手順/過去事例＋直近ログ指標を提示して初動対応を支援。
- 運用メトリクス説明: 監視指標の解釈と異常可能性を説明（引用付き）。
- 主に使うDatabricks: Delta上の運用データ（SQL Warehouse）、Vector Search。

## 2.5 分析/ML
- モデル/特徴量レジストリ探索: 既存モデル・特徴量の仕様や学習データの出典参照。
- Serving エンドポイント動作確認（読み取り中心）: 入出力例や仕様の引用提示。
- 主に使うDatabricks: Model Registry/Feature Store、Serving Endpoints、Vector Search。

## 2.6 共通の期待効果
- IDE内完結（往復削減）
- 根拠リンク（引用で説得力/再現性）
- ガバナンス適合（read-only/監査/レート制御）
- 再利用促進（既存資産の可視化）

## 2.7 適用前提
- 社内規程・標準・良質サンプルが存在し、共有可能な参照（URL/識別子）が付与できる。
- Databricks に Unity Catalog（メタデータ/リネージ）と Vector Search（文書検索）が整備されている。
- IDEからのアクセスは read-only で十分（実装/レビュー支援が主目的）。

# 3. サンプルプロジェクト案（推奨）: ドキュメント/コード レビューエージェント

- ねらい
  - IDE内で編集中のドキュメント/コードを、組織知（規程・標準・ベストプラクティス・メタデータ）に基づいて“引用付き”でレビュー可能にする。

- 想定ユーザー/シナリオ
  - 開発者のセルフレビュー（PR前のMarkdown/コード/SQL）
  - レビューワーの根拠付きレビュー作成支援（変更差分の要点抽出）
  - テックライター/アーキテクトのテンプレ準拠・用語統一チェック

- 要件（機能・概要）
  - FR-01: アクティブドキュメント/選択範囲/変更差分をレビュー対象として受け付ける
  - FR-02: 指摘ごとに少なくとも1つの引用（規程/実例/メタデータ）を提示する
  - FR-03: ドキュメント観点（テンプレ準拠、必須章、用語統一、曖昧表現検知）
  - FR-04: コード観点（命名、例外、ログ、SQL規約、セキュリティ）
  - FR-05: データ参照がある場合、データ分類（PII等）・リネージに基づく注意点を提示
  - FR-06: レビュー厳格度（標準/緩め）切替、IDE内での箇条書き＋引用リンク提示

- 要件（非機能・概要）
  - NFR-01: 標準レビューで平均5秒以内の応答
  - NFR-02: IDE外への送信は最小化（選択範囲/差分/メタ情報）
  - NFR-03: 通信の暗号化と監査ログ（誰が/何を/いつ）
  - NFR-04: 組織ポリシーで拡張の利用可否を集中管理

- 全体設計（コンセプト）
  - VS Code（Copilot Agent Mode）: 会話IF＋IDEコンテキスト
  - レビュー拡張: 対象収集、問い合わせ生成、結果整形
  - Gateway（社内API）: 認証/監査/レート制御/ルーティング（read-only）
  - Databricks 知識基盤: Vector Search（規程/Wiki/良質例）、SQL Warehouse（メタ/品質指標）、Unity Catalog（分類/リネージ）

- スコープ/非スコープ
  - スコープ: Markdown/設計書、Python/SQL のレビュー、引用提示、ガバナンス運用
  - 非スコープ: 自動修正のコミット/プッシュ、データの書き込み操作、IDE外クライアント

- MVP段階と評価指標
  - MVP-1: ドキュメントレビュー（テンプレ準拠/用語統一/抜け漏れ）＋引用
  - MVP-2: コードレビュー（命名/例外/ログ/SQL規約）＋参考実装提示
  - MVP-3: データ使用チェック（分類/リネージに基づく注意点）
  - 指標: IDE外遷移回数の削減、一次レビュー時間、引用付き指摘の採用率

# 4. サンプルプロジェクト案2: データ辞書・系統（リネージ）Q&Aアシスタント

- ねらい
  - テーブル/列の意味、品質指標、下流影響を会話で即時回答し、設計・レビューの判断を支援する。

- 要件・概要
  - FR: 用語/テーブル/列を入力に、データ辞書・リネージ・品質指標を引用付きで提示
  - NFR: 平均応答5秒以内、引用リンクの一貫提示、read-only参照

- 全体設計（コンセプト）
  - Vector Search（用語集/ドキュメント）、SQL Warehouse（メタデータ照会）、Unity Catalog（リネージ）
  - VS Code（Copilot Agent Mode）＋拡張＋Gateway の構成は案3に準拠

- MVPと評価
  - MVP: 基本Q&A（列説明・関連テーブル・下流影響の提示）
  - 指標: 回答の引用率、影響分析所要時間の短縮

- リスク
  - メタデータ整備状況に依存→ カバレッジの段階導入と更新運用
